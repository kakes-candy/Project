function resize(){width_container=parseInt(d3.select("#container-map").style("width"),10),width=width_container-margin.left-margin.right,height=width*ratio,svg.style("width",width+"px").style("height",height+"px")}var width_container=parseInt(d3.select("#container-map").style("width"),10),margin={top:10,right:10,bottom:10,left:10},width=width_container-margin.left-margin.right,ratio=1.175,height=width*ratio,scaling=width_container/1e3;console.log(width);var quantize=d3.scale.quantize().range(["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]),kleurschaal=d3.scale.category20().domain([0,519]),path=d3.geo.path().projection(null).pointRadius(10),svg=d3.select("#container-map").append("svg").attr("width",width).attr("height",height),background=svg.append("rect").attr("width",width).attr("height",height).style("fill","#b9ddfc"),features=svg.append("g");d3.json("/data/kaart/NL.json",function(t,e){if(t)return console.error(t);console.log(e);features.selectAll(".state").data(topojson.feature(e,e.objects.gemeentes).features).enter().append("path").attr("class","gemeente").style("fill",function(){return quantize.range()[0]}).attr("d",path),features.append("path").datum(topojson.mesh(e,e.objects.gemeentes,function(t,e){return t!==e})).attr("class","state-border").attr("d",path).style("stroke-width","1.5px"),features.selectAll(".vestiging").data(topojson.feature(e,e.objects.vestigingen).features).enter().append("circle").attr("transform",function(t){return"translate("+t.geometry.coordinates+")"}).attr("r",5).attr("class","vestiging");features.attr("transform","translate(0,0)scale(0.6)");features.selectAll(".place-label").data(topojson.feature(e,e.objects.vestigingen).features).enter().append("text").attr("class","place-label").attr("transform",function(t){return"translate("+t.geometry.coordinates+")"}).attr("dy","0em").attr("dx","0.5em").text(function(t){return t.properties.Naam}).attr("id",function(t){return"label-"+t.properties.Naam.replace(/ /g,"_")});features.attr("transform","translate(0,0)scale("+scaling+")"),d3.selectAll("#label-Den_Haag").attr("text-anchor","end").attr("dy","1em"),d3.selectAll("#label-Zoetermeer").attr("dy","1em")});